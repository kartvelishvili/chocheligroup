import React, { useEffect } from 'react';
import { motion } from 'framer-motion';
import Layout from '@/components/Layout';
import Timeline from '@/components/Timeline';
import { useLanguage } from '@/contexts/LanguageContext';
import { ArrowDown } from 'lucide-react';
import { useSiteContent } from '@/hooks/useSiteContent';
import { useDesign } from '@/hooks/useDesign';

const defaultMilestones = [
  { year: "1991", title: 'კომპანია „ლომისის" დაარსება' },
  { year: "2005", title: 'ნატახტარის ლუდსახარშის გახსნა' },
  { year: "2006", title: 'პარტნიორობა Knauf-თან' },
  { year: "2009", title: 'საკონდიტრო კომპანია „ბარამბოს" დაარსება' },
  { year: "2011", title: 'ლუდსახარშ „ზედაზენის" გახსნა' },
  { year: "2017", title: 'სავაჭრო ქსელ „მაგნიტის" გაშვება' },
  { year: "2024", title: '„დეილი" ჯგუფთან შერწყმა' },
  { year: "2025", title: 'ელექტრომობილების (EV) და კაბალას პროექტების გაფართოება' }
];

const defaultBioSections = [
  {
    id: 1,
    title: `ადრეული წლები და განათლება`,
    text: `ცეზარ ჩოჩელის გზა იწყება საქართველოსთვის ურთულეს, გარდამავალ პერიოდში. ახალგაზრდობიდანვე გამოირჩეოდა ლიდერული თვისებებით და შრომისადმი განსაკუთრებული დამოკიდებულებით. განათლების მიღების პარალელურად, იგი აქტიურად აკვირდებოდა ეკონომიკურ პროცესებს, რამაც ჩამოაყალიბა მისი მომავალი ხედვა — შეექმნა ქართული წარმოება, რომელიც კონკურენციას გაუწევდა იმპორტს.`,
    image: "https://i.postimg.cc/L5fSvwW3/506835830-10014646511952069-4363242619380959237-n.jpg"
  },
  {
    id: 2,
    title: `პირველი ნაბიჯები ბიზნესში`,
    text: `90-იანების დასაწყისში, როდესაც ქვეყანაში სრული ეკონომიკური სტაგნაცია იყო, ცეზარ ჩოჩელმა გადადგა გაბედული ნაბიჯები კერძო სექტორში. მცირე სავაჭრო ოპერაციებით დაწყებული საქმიანობა მალევე გადაიზარდა უფრო ორგანიზებულ სტრუქტურებში. ეს პერიოდი გახდა მისი, როგორც მეწარმის, გამოცდილების ქვაკუთხედი, სადაც მან ისწავლა კრიზისების მართვა და რესურსების ეფექტური მობილიზება.`,
    image: "https://i.postimg.cc/x1g2sKsX/505897957-10014646788618708-2502156204642059171-n.jpg"
  },
  {
    id: 3,
    title: `წარმოების მასშტაბირება`,
    text: `2000-იანი წლები გარდამტეხი აღმოჩნდა. „ლომისის“ და შემდგომ „ნატახტარის“ დაარსებამ სრულიად შეცვალა ქართული ბაზარი. ეს არ იყო მხოლოდ ბიზნესი, ეს იყო განაცხადი, რომ საქართველოში შესაძლებელია ევროპული სტანდარტის პროდუქციის წარმოება. წარმოების მასშტაბირებამ შექმნა ათასობით სამუშაო ადგილი და მნიშვნელოვანი წვლილი შეიტანა სახელმწიფო ბიუჯეტში.`,
    image: "https://i.postimg.cc/SsYbNHmb/506372066-10013430508740336-349768235636487541-n.jpg"
  },
  {
    id: 4,
    title: `საჯარო სამსახური და ლიდერობა`,
    text: `ბიზნესში დაგროვილი უზარმაზარი გამოცდილება ცეზარ ჩოჩელმა სახელმწიფო სამსახურში გადაიტანა. როგორც რეგიონის გუბერნატორმა, მან დანერგა მართვის ეფექტური მოდელები. მისი ხელმძღვანელობით განხორციელდა არაერთი ინფრასტრუქტურული პროექტი, მოხდა რეგიონის გაზიფიცირება და საგზაო ინფრასტრუქტურის რეაბილიტაცია, რამაც ხელი შეუწყო ადგილობრივი ეკონომიკის გამოცოცხლებას.`,
    image: "https://i.postimg.cc/0jgR6ZNb/506648127-10020319648051422-783754334374978744-n.jpg"
  },
  {
    id: 5,
    title: `ინდუსტრიული დივერსიფიკაცია`,
    text: `მხოლოდ სასმელების წარმოებით შემოფარგვლა არ იყო საკმარისი. სტრატეგიული ხედვის ნაწილი იყო ბიზნესის დივერსიფიკაცია. ასე დაარსდა „ბარამბო“ — პირველი მასშტაბური ქართული შოკოლადის საწარმო, და დაიწყო თანამშრომლობა გლობალურ გიგანტთან — Knauf-თან. ეს ნაბიჯები ადასტურებდა ჯგუფის მზაობას, ემუშავა სხვადასხვა სექტორში უმაღლესი სტანდარტებით.`,
    image: "https://i.postimg.cc/66RNssH4/508447183-10045627062187347-4692553886682053883-n.jpg"
  },
  {
    id: 6,
    title: `რითეილი და ეროვნული მასშტაბი`,
    text: `მომხმარებელთან პირდაპირი კომუნიკაციისთვის შეიქმნა „მაგნიტი“, რომელიც დღეს ასობით ფილიალს ითვლის მთელი საქართველოს მასშტაბით. რითეილ სექტორში შესვლამ შეკრა ვერტიკალური ინტეგრაციის ჯაჭვი — წარმოებიდან მომხმარებლამდე. 2024 წელს „დეილი“ ჯგუფთან შერწყმამ კი შექმნა ბაზრის უპირობო ლიდერი, რაც ახალ შესაძლებლობებს ხსნის განვითარებისთვის.`,
    image: "https://i.postimg.cc/BQ0f4hkq/508418937-10043544265728960-2290390415442953318-n.jpg"
  },
  {
    id: 7,
    title: `დღევანდელი დღე`,
    text: `დღეს ცეზარ ჩოჩელი აგრძელებს აქტიურ საქმიანობას როგორც ბიზნესის განვითარების, ისე საკანონმდებლო მიმართულებით. მისი მიმდინარე პროექტები მოიცავს მწვანე ენერგიას, ელექტრომობილების ინფრასტრუქტურას და აგროტექნოლოგიებს. იგი რჩება ინოვაციების ერთგული, მუდმივად ეძებს ახალ გზებს ქვეყნის ეკონომიკური გაძლიერებისთვის.`,
    image: null
  }
];

const FounderPageKA = () => {
  const { setLanguage } = useLanguage();
  const { content: c } = useSiteContent('founder_page');

  // Build milestones from DB content
  const milestones = c?.milestones?.map(m => ({ year: m.year, title: m.title_ka })) || defaultMilestones;
  
  // Build bio sections from DB content
  const bioSections = c?.bio_sections?.map(s => ({
    id: s.id,
    title: s.title_ka,
    text: s.text_ka,
    image: s.image_url
  })) || defaultBioSections;

  // Force language context to KA when this page mounts
  useEffect(() => {
    if (setLanguage) {
      setLanguage('ka');
    }
  }, [setLanguage]);

  return (
    <Layout>
      <div className="bg-slate-50 min-h-screen font-sans">
        
        {/* Hero Section */}
        <section className="relative h-screen w-full overflow-hidden">
          <div className="absolute inset-0 w-full h-full">
            <div className="absolute inset-0 bg-gradient-to-t from-slate-900 via-slate-900/40 to-transparent z-10" />
            <div className="absolute inset-0 bg-gradient-to-r from-slate-900/70 via-transparent to-transparent z-10" />
            <img 
              src={c?.hero_image_url || "https://i.postimg.cc/s2XRbv8m/506208349-10020878614662192-2846366780113441950-n.jpg"}
              alt={c?.hero_name || "ცეზარ ჩოჩელი"}
              className="w-full h-full object-cover object-center"
            />
          </div>

          <div className="absolute inset-0 z-20 flex flex-col justify-end pb-32 px-6 md:px-20 container mx-auto">
            <motion.div 
              initial={{ opacity: 0, y: 50 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ duration: 1 }}
              className="max-w-4xl"
            >
              <h1 className="text-5xl md:text-7xl lg:text-8xl font-bold text-white mb-6 drop-shadow-lg">
                {c?.hero_name || 'ცეზარ ჩოჩელი'}
              </h1>
              <div className="h-1.5 w-32 bg-corporate-yellow rounded-full mb-8" />
              <p className="text-xl md:text-3xl text-white/95 font-light leading-relaxed max-w-3xl drop-shadow-md">
                {c?.hero_subtitle_ka || '30+ წლიანი შესრულება ბიზნესში, წარმოებაში და ინსტიტუციურ ლიდერობაში'}
              </p>
            </motion.div>
          </div>

          <motion.div 
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            transition={{ delay: 1.5, duration: 1, repeat: Infinity, repeatType: 'reverse' }}
            className="absolute bottom-10 left-1/2 -translate-x-1/2 z-20 text-white"
          >
            <ArrowDown className="w-8 h-8 opacity-80" />
          </motion.div>
        </section>

        {/* Introduction */}
        <section className="py-20 bg-white">
          <div className="container mx-auto px-6 max-w-4xl text-center">
            <h2 className="text-3xl md:text-4xl font-bold text-slate-800 mb-8">
              ისტორია, რომელიც ქმნის მომავალს
            </h2>
            <p className="text-lg text-slate-600 leading-relaxed">
              ცეზარ ჩოჩელის ბიოგრაფია არის მაგალითი იმისა, თუ როგორ შეიძლება ხედვის, შრომისა და შეუპოვრობის შედეგად შეიქმნას ეროვნული ღირებულებები. ქვემოთ მოცემულია ძირითადი ეტაპები, რომლებმაც განსაზღვრეს მისი გზა.
            </p>
          </div>
        </section>

        {/* Timeline */}
        <section className="bg-slate-50 py-10">
           <Timeline milestones={milestones} />
        </section>

        {/* Biography Sections */}
        <div className="bg-white">
          {bioSections.map((section, index) => (
            <section key={section.id} className="py-20 border-b border-slate-100 last:border-0 overflow-hidden">
              <div className="container mx-auto px-6 max-w-7xl">
                <div className={`flex flex-col ${index % 2 === 0 ? 'lg:flex-row' : 'lg:flex-row-reverse'} items-center gap-16`}>
                  
                  {/* Text Content */}
                  <motion.div 
                    initial={{ opacity: 0, x: index % 2 === 0 ? -50 : 50 }}
                    whileInView={{ opacity: 1, x: 0 }}
                    viewport={{ once: true, margin: "-10%" }}
                    transition={{ duration: 0.8 }}
                    className="flex-1 space-y-6"
                  >
                    <div className="flex items-center gap-4 mb-2">
                       <span className="text-6xl font-serif text-slate-100 font-bold -ml-4 select-none">0{index + 1}</span>
                       <h3 className="text-3xl md:text-4xl font-bold text-slate-900 relative z-10">
                          {section.title}
                       </h3>
                    </div>
                    <div className="h-1 w-20 bg-corporate-yellow rounded-full" />
                    <p className="text-lg text-slate-600 leading-8 text-justify">
                      {section.text}
                    </p>
                  </motion.div>

                  {/* Image Content (if exists) */}
                  {section.image && (
                    <motion.div 
                      initial={{ opacity: 0, scale: 0.95 }}
                      whileInView={{ opacity: 1, scale: 1 }}
                      viewport={{ once: true, margin: "-10%" }}
                      transition={{ duration: 0.8 }}
                      className="flex-1 w-full"
                    >
                      <div className="relative aspect-[4/3] rounded-2xl overflow-hidden shadow-2xl group">
                        <div className="absolute inset-0 bg-corporate-blue/10 group-hover:bg-transparent transition-colors duration-500 z-10" />
                        <img 
                          src={section.image} 
                          alt={section.title}
                          className="w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-700"
                        />
                      </div>
                    </motion.div>
                  )}
                  
                  {/* No Image Layout Adjustment */}
                  {!section.image && (
                     <div className="flex-1 hidden lg:block relative">
                        <div className="absolute inset-0 bg-slate-50 rounded-2xl border-2 border-dashed border-slate-200 flex items-center justify-center">
                           <span className="text-slate-300 font-bold text-xl uppercase tracking-widest">
                              გაგრძელება იქნება...
                           </span>
                        </div>
                     </div>
                  )}
                </div>
              </div>
            </section>
          ))}
        </div>
        
      </div>
    </Layout>
  );
};

export default FounderPageKA;